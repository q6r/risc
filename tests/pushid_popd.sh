#!/bin/sh
DESC="pushid bytes;popd r2-r8"
CODE="db22222222db33333333db44444444db55555555db66666666db77777777db88888888db99999999ae02ae03ae04ae05ae06ae07ae08ae09"
RANDOM_STACK=1
EXPECT="process_pushid >>>>> pushid 22222222
-----------------------------------------------------------
| pc = 00000004 ps = 00000001 r1 = 00000000 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
process_pushid >>>>> pushid 33333333
-----------------------------------------------------------
| pc = 00000009 ps = 00000002 r1 = 00000000 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
process_pushid >>>>> pushid 44444444
-----------------------------------------------------------
| pc = 0000000e ps = 00000003 r1 = 00000000 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
process_pushid >>>>> pushid 55555555
-----------------------------------------------------------
| pc = 00000013 ps = 00000004 r1 = 00000000 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
process_pushid >>>>> pushid 66666666
-----------------------------------------------------------
| pc = 00000018 ps = 00000005 r1 = 00000000 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
|> stack[4@0x19bd060] = 66666666
process_pushid >>>>> pushid 77777777
-----------------------------------------------------------
| pc = 0000001d ps = 00000006 r1 = 00000000 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
|> stack[4@0x19bd060] = 66666666
|> stack[5@0x19bd064] = 77777777
process_pushid >>>>> pushid 88888888
-----------------------------------------------------------
| pc = 00000022 ps = 00000007 r1 = 00000000 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
|> stack[4@0x19bd060] = 66666666
|> stack[5@0x19bd064] = 77777777
|> stack[6@0x19bd068] = 88888888
process_pushid >>>>> pushid 99999999
-----------------------------------------------------------
| pc = 00000027 ps = 00000008 r1 = 00000000 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
|> stack[4@0x19bd060] = 66666666
|> stack[5@0x19bd064] = 77777777
|> stack[6@0x19bd068] = 88888888
|> stack[7@0x19bd06c] = 99999999
process_popd >>>>> popd r1
-----------------------------------------------------------
| pc = 00000029 ps = 00000007 r1 = 99999999 r2 = 00000000 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
|> stack[4@0x19bd060] = 66666666
|> stack[5@0x19bd064] = 77777777
|> stack[6@0x19bd068] = 88888888
process_popd >>>>> popd r2
-----------------------------------------------------------
| pc = 0000002b ps = 00000006 r1 = 99999999 r2 = 88888888 |
| r3 = 00000000 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
|> stack[4@0x19bd060] = 66666666
|> stack[5@0x19bd064] = 77777777
process_popd >>>>> popd r3
-----------------------------------------------------------
| pc = 0000002d ps = 00000005 r1 = 99999999 r2 = 88888888 |
| r3 = 77777777 r4 = 00000000 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
|> stack[4@0x19bd060] = 66666666
process_popd >>>>> popd r4
-----------------------------------------------------------
| pc = 0000002f ps = 00000004 r1 = 99999999 r2 = 88888888 |
| r3 = 77777777 r4 = 66666666 r5 = 00000000 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
|> stack[3@0x19bd05c] = 55555555
process_popd >>>>> popd r5
-----------------------------------------------------------
| pc = 00000031 ps = 00000003 r1 = 99999999 r2 = 88888888 |
| r3 = 77777777 r4 = 66666666 r5 = 55555555 r6 = 00000000 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
|> stack[2@0x19bd058] = 44444444
process_popd >>>>> popd r6
-----------------------------------------------------------
| pc = 00000033 ps = 00000002 r1 = 99999999 r2 = 88888888 |
| r3 = 77777777 r4 = 66666666 r5 = 55555555 r6 = 44444444 |
| r7 = 00000000 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
|> stack[1@0x19bd054] = 33333333
process_popd >>>>> popd r7
-----------------------------------------------------------
| pc = 00000035 ps = 00000001 r1 = 99999999 r2 = 88888888 |
| r3 = 77777777 r4 = 66666666 r5 = 55555555 r6 = 44444444 |
| r7 = 33333333 r8 = 00000000 ........................... |
-----------------------------------------------------------
|> stack[0@0x19bd050] = 22222222
process_popd >>>>> popd r8
-----------------------------------------------------------
| pc = 00000037 ps = 00000000 r1 = 99999999 r2 = 88888888 |
| r3 = 77777777 r4 = 66666666 r5 = 55555555 r6 = 44444444 |
| r7 = 33333333 r8 = 22222222 ........................... |
-----------------------------------------------------------
|> No stack"
run_test
